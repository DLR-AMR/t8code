name: spell_check

on:
  merge_group:
  push:
    branches:
      - main
  pull_request:
  workflow_dispatch: # Be able to trigger this manually on github.com

jobs:
  typos-check:
    name: Spell Check with Typos
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Actions Repository
        uses: actions/checkout@v4
      - name: Check spelling
        uses: crate-ci/typos@master
      - name: check macros
        run: |
          git diff --name-only --diff-filter=A | xargs ./scripts/check_macros.scp &> >(tee -a indent_script_output.txt)
      - name: Archive script output
        if: failure()
        uses: actions/upload-artifact@v4
        with:
          name: t8code indentation report
          path: indent_script_output.txt
